# ğŸ—ï¸ NomadWay System Architecture

## ğŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MOBILE CLIENT (React Native)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Navigation Layer                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Home    â”‚  â”‚ Explore  â”‚  â”‚  Routes  â”‚  â”‚ Profile  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Screen  â”‚  â”‚  Screen  â”‚  â”‚  Screen  â”‚  â”‚  Screen  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚         â†“             â†“             â†“             â†“        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Feature Modules                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ AI Route     â”‚  â”‚ Gamification â”‚  â”‚  Community   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Builder      â”‚  â”‚ System       â”‚  â”‚  Features    â”‚    â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Form UI     â”‚  â”‚â€¢ Achievementsâ”‚  â”‚â€¢ Posts       â”‚    â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Map View    â”‚  â”‚â€¢ Leaderboard â”‚  â”‚â€¢ Reviews     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Timeline    â”‚  â”‚â€¢ Progress    â”‚  â”‚â€¢ Sharing     â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Data Layer                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Constants    â”‚  â”‚ Utils        â”‚  â”‚ Local Storageâ”‚    â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚    â”‚
â”‚  â”‚  â”‚â€¢ User Seg.   â”‚  â”‚â€¢ Route Utils â”‚  â”‚â€¢ AsyncStorageâ”‚    â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Gamificationâ”‚  â”‚â€¢ Localizationâ”‚  â”‚â€¢ User Data   â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                         HTTP/REST API
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER (Node.js/Express)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    API Endpoints                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚ Route Builder API    â”‚  â”‚ Gamification API     â”‚       â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚    â”‚
â”‚  â”‚  â”‚ POST /routes/build   â”‚  â”‚ POST /checkin        â”‚       â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚ GET  /progress/:id   â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ Returns:             â”‚  â”‚ GET  /leaderboard    â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Route sequence     â”‚  â”‚ PUT  /profile/:id    â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Time estimates     â”‚  â”‚                      â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Cost breakdown     â”‚  â”‚ Returns:             â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Alternatives       â”‚  â”‚ â€¢ Points & badges    â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   Business Logic                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ Route Algorithm  â”‚  â”‚ Gamification     â”‚               â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ Engine           â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Filter POIs     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Calculate dist. â”‚  â”‚â€¢ Point calc.     â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Optimize seq.   â”‚  â”‚â€¢ Achievement     â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Gen. altern.    â”‚  â”‚  tracking        â”‚               â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚â€¢ Leaderboard     â”‚               â”‚    â”‚
â”‚  â”‚  â”‚Age-based logic:  â”‚  â”‚  management      â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Family: 800m    â”‚  â”‚                  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Adults: 1500m   â”‚  â”‚Age-based points: â”‚               â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚â€¢ Different badgesâ”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   Data Storage                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ In-Memory Store  â”‚  â”‚ File System      â”‚               â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ User progress   â”‚  â”‚â€¢ attractions.jsonâ”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Leaderboard     â”‚  â”‚â€¢ routes.json     â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Active sessions â”‚  â”‚â€¢ regions.json    â”‚               â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚â€¢ community.json  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚[Future: DB]      â”‚  â”‚                  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ PostgreSQL      â”‚  â”‚                  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Redis cache     â”‚  â”‚                  â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagrams

### 1. Route Building Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Route Builderâ”‚â”€â”€â”€â”€â–¶â”‚   Backend    â”‚â”€â”€â”€â”€â–¶â”‚ Algorithmâ”‚
â”‚ Input   â”‚     â”‚    Screen    â”‚     â”‚     API      â”‚     â”‚  Engine  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚ 1. Select         â”‚                     â”‚                   â”‚
   â”‚    parameters     â”‚                     â”‚                   â”‚
   â”‚                   â”‚ 2. POST request     â”‚                   â”‚
   â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
   â”‚                   â”‚                     â”‚ 3. Filter POIs    â”‚
   â”‚                   â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚                   â”‚                     â”‚ 4. Calculate      â”‚
   â”‚                   â”‚                     â”‚    distances      â”‚
   â”‚                   â”‚                     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚                   â”‚ 5. Route response   â”‚                   â”‚
   â”‚                   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚ 6. Display        â”‚                     â”‚                   â”‚
   â”‚    map & timeline â”‚                     â”‚                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚                   â”‚
```

### 2. Gamification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Achievement  â”‚â”€â”€â”€â”€â–¶â”‚  Gamificationâ”‚â”€â”€â”€â”€â–¶â”‚Progress â”‚
â”‚ Action  â”‚     â”‚    Screen    â”‚     â”‚     API      â”‚     â”‚ Tracker â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚ 1. Visit place    â”‚                     â”‚                   â”‚
   â”‚                   â”‚ 2. Check-in         â”‚                   â”‚
   â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
   â”‚                   â”‚                     â”‚ 3. Add points     â”‚
   â”‚                   â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚                   â”‚                     â”‚ 4. Check          â”‚
   â”‚                   â”‚                     â”‚    achievements   â”‚
   â”‚                   â”‚                     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚                   â”‚ 5. New badges       â”‚                   â”‚
   â”‚                   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
   â”‚                   â”‚                     â”‚                   â”‚
   â”‚ 6. Show           â”‚                     â”‚                   â”‚
   â”‚    notification   â”‚                     â”‚                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚                   â”‚
```

## ğŸ¯ Audience Segmentation Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INPUT                                 â”‚
â”‚                Select Travel Cohort                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
     â”‚ Family  â”‚                     â”‚  Adults   â”‚
     â”‚(Ğ¡ĞµĞ¼ÑŒÑ)  â”‚                     â”‚(Ğ’Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ğµ) â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Parameters:         â”‚        â”‚ Parameters:            â”‚
  â”‚ â€¢ Max walk: ~800â€¯m  â”‚        â”‚ â€¢ Max walk: ~1500â€¯m    â”‚
  â”‚ â€¢ Visit: 40â€¯min     â”‚        â”‚ â€¢ Visit: 60â€¯min        â”‚
  â”‚ â€¢ Activity: easyâ†’modâ”‚        â”‚ â€¢ Activity: easyâ†’intenseâ”‚
  â”‚ â€¢ Focus: education, â”‚        â”‚ â€¢ Focus: culture, food,â”‚
  â”‚   culture, nature   â”‚        â”‚   adventure            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     FILTERED & OPTIMIZED ROUTE       â”‚
    â”‚  (POIs, travel times, costs, alts)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Data Models

### Attraction Model
```javascript
{
  id: number,
  name: string,
  description: string,
  longDescription: string,
  image: url,
  latitude: number,
  longitude: number,
  category: string,
  rating: number,
  
  // NEW FIELDS
  ageGroups: ['family', 'adults'],
  activityLevel: 'easy' | 'moderate' | 'intense',
  interests: string[],
  averageVisitDuration: number, // minutes
  budget: {
    min: number,  // tenge
    max: number   // tenge
  }
}
```

### User Progress Model
```javascript
{
  userId: string,
  username?: string,
  ageGroup?: string,
  avatar?: string,
  points: number,
  achievements: string[], // achievement IDs
  placesVisited: Array<{
    id: number,
    name: string,
    visitedAt: ISO8601
  }>,
  citiesVisited: string[],
  distanceWalked: number, // meters
  routesCompleted: number,
  createdAt: ISO8601
}
```

### Route Model
```javascript
{
  route: Array<{
    attraction: Attraction,
    visitDuration: number,     // minutes
    travelTime: number,        // minutes
    travelDistance: number,    // meters
    estimatedCost: number,     // tenge
    alternatives: Array<{
      id: number,
      name: string,
      description: string,
      rating: number,
      estimatedCost: number
    }>
  }>,
  summary: {
    totalDuration: number,
    totalCost: number,
    numberOfStops: number,
    ageGroup: string,
    activityLevel: string
  }
}
```

## ğŸ”Œ API Endpoints

### Route Builder
```
POST /api/routes/build

Request:
{
  duration: '3_hours' | '1_day' | '3_days',
  budget: { min: number, max: number },
  interests: string[],
  activityLevel: 'easy' | 'moderate' | 'intense',
  ageGroup: 'family' | 'adults',
  startLocation?: { latitude, longitude }
}

Response:
{
  route: RouteStop[],
  summary: RouteSummary
}
```

### Gamification
```
POST /api/gamification/checkin
Request: { userId, placeId, placeName, city, ageGroup }
Response: { success, pointsEarned, totalPoints, newAchievements }

GET /api/gamification/progress/:userId
Response: UserProgress

GET /api/gamification/leaderboard?ageGroup=&period=
Response: { leaderboard: User[], period, ageGroup }

PUT /api/gamification/profile/:userId
Request: { username, ageGroup, avatar }
Response: UserProgress
```

## ğŸ¨ Screen Hierarchy

```
App.js
â”œâ”€ TabNavigator (Bottom Tabs)
â”‚  â”œâ”€ Explore Tab
â”‚  â”œâ”€ Routes Tab
â”‚  â”œâ”€ Community Tab
â”‚  â”œâ”€ Profile Tab
â”‚  â”‚  â”œâ”€ [Gamification Cards]
â”‚  â”‚  â”œâ”€ [Stats Row - Clickable]
â”‚  â”‚  â””â”€ [Settings]
â”‚  â””â”€ AI Chat Tab
â”‚
â””â”€ StackNavigator (Screens)
   â”œâ”€ AttractionDetails
   â”œâ”€ RouteDetails
   â”œâ”€ MapScreen
   â”œâ”€ TravelerTools
   â”œâ”€ AIGuide
   â”œâ”€ RegionalGuide
   â”œâ”€ PersonalizedRoute
   â”‚
   â””â”€ [NEW SCREENS]
      â”œâ”€ AIRouteBuilder
      â”‚  â”œâ”€ Parameter Form
      â”‚  â”œâ”€ Map View
      â”‚  â””â”€ Timeline
      â”œâ”€ Achievements
      â”‚  â”œâ”€ Stats Header
      â”‚  â””â”€ Achievement List
      â””â”€ Leaderboard
         â”œâ”€ Filters
         â””â”€ User Rankings
```

## ğŸ” Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Security Layers (Future)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Authentication                   â”‚
â”‚    â€¢ JWT tokens                     â”‚
â”‚    â€¢ OAuth integration              â”‚
â”‚                                     â”‚
â”‚ 2. Authorization                    â”‚
â”‚    â€¢ Role-based access              â”‚
â”‚    â€¢ User permissions               â”‚
â”‚                                     â”‚
â”‚ 3. Data Validation                  â”‚
â”‚    â€¢ Input sanitization             â”‚
â”‚    â€¢ Request validation             â”‚
â”‚                                     â”‚
â”‚ 4. Rate Limiting                    â”‚
â”‚    â€¢ API throttling                 â”‚
â”‚    â€¢ DDoS protection                â”‚
â”‚                                     â”‚
â”‚ 5. Data Encryption                  â”‚
â”‚    â€¢ HTTPS/TLS                      â”‚
â”‚    â€¢ Encrypted storage              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Performance Strategies               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend:                            â”‚
â”‚ â€¢ Lazy loading components            â”‚
â”‚ â€¢ Image optimization                 â”‚
â”‚ â€¢ Memoization for expensive calcs    â”‚
â”‚ â€¢ Virtualized lists                  â”‚
â”‚                                      â”‚
â”‚ Backend:                             â”‚
â”‚ â€¢ Response caching                   â”‚
â”‚ â€¢ Database indexing (future)         â”‚
â”‚ â€¢ Query optimization                 â”‚
â”‚ â€¢ Async processing                   â”‚
â”‚                                      â”‚
â”‚ Data:                                â”‚
â”‚ â€¢ Pagination for large lists         â”‚
â”‚ â€¢ Incremental loading                â”‚
â”‚ â€¢ Offline data persistence           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Architecture Version:** 1.0.0  
**Last Updated:** November 15, 2025  
**Status:** âœ… Production-Ready
